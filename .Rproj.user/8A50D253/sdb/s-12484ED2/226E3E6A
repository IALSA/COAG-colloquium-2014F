{
    "contents" : "---\ntitle: \"RR Skills (2): Graph Production \"\nauthor: Andrey Koval\ndate: November 4, 2014\noutput: \n  ioslides_presentation:\n    widescreen: true\n    transition: faster\n---\n\n<!--  Set the working directory to the repository's base directory; this assumes the report is nested inside of only one directory.-->\n```{r, echo=F, message=F} \nlibrary(knitr)\nopts_knit$set(root.dir='../')  #Don't combine this call with any other chunk -especially one that uses file paths.\n```\n\n<!-- Set the report-wide options, and point to the external script file. -->\n```{r, echo=F, message=T}\nrequire(knitr)\nopts_chunk$set(\n  results='show', \n  message = TRUE,\n  comment = NA, \n  tidy = FALSE,\n#   fig.height = 4.8, \n#   fig.width = 6.5, \n  out.width = NULL,\n  fig.path = 'figure_rmd_try/',     \n  dev = \"png\",\n  dpi = 400\n)\nechoChunks <- FALSE\nwarningChunks<- FALSE\nmessageChunks<- FALSE\noutwidthChunks <- \"90%\"\noptions(width=120) #So the output is 50% wider than the default.\nread_chunk(\"./Reports/2014-11-04-Producing-Graphs.R\") # the file to which knitr calls for the chunks\n```\n\n\n## Overview of the Series\n\n- Oct 14  -- Intro to Reproducible Research  \n- Oct 21  -- RR Basic Skills (1): Data Manipulation\n- Oct 28  -- Intro to Latent Class and Latent Transition Models  \n- Nov 4  -- **RR Basic Skills (2): Graph Production**  \n- Nov 11      \n- Nov 18  -- RR Basic Skills (3): Statistical Modeling   \n- Nov 25  -- RR Basic Skills (4): Dynamic Reporting   \n- Dec 2 -- Migrating into R from other Statistical Software   \n\n\n## Previously:\n  \n<img src = 'images/ai/DataMap_today.png' width=\"100%\"></img>  \n\n### Tidy data\n\n1. Each variable forms a column\n2. Each observation forms a row\n3. Each type of observational unit forms a table\n\nSee [Hadley Wickham's](http://had.co.nz/) paper on [tidy data](http://www.jstatsoft.org/v59/i10/paper)\n\n  \n\n## Previously:\n\n<img src = 'images/ai/DataMap_full.png' width=\"100%\"></img> \n```p\n\"./Scripts/Data/dsL.R\"\n```\n\ndownload the files to work along at [GitHub](https://github.com/IALSA/COAG-colloquium-2014F)\n\n\n## Previously: \n\n```\n\"./Scripts/Data/dsL.R\"\n```\nimported the raw data files\n```\nmyExtract <- \"./Data/Extract/NLSY97_Attend_20141021/NLSY97_Attend_20141021\"\npathSourceData <- paste0(myExtract,\".csv\") \nSourceData <- read.csv(pathSourceData,header=TRUE, skip=0,sep=\",\")\nds0 <- SourceData\n```\ncleaned, transformed , and at the end, exported it. \n```\npathdsLrds <- \"./Data/Derived/dsL.rds\"\nsaveRDS(object=dsL, file=pathdsLrds, compress=\"xz\")\n```\nThe slides on [data manipulation](./Reports/2014-10-21-Data-Manipulation.html) were in fact annotations over the live script <code>./Scripts/Data/dsL.R</code>  that brings data to the \"dsL\" stage every time it is sourced. \n\n## Load Data {.smaller}\n```{r LoadData, echo=T, warning=F, message=F, results='hide'}\n```\n```{r}\nstr(dsL)\n```\n\n\n## Load Data\n```{r}\ndplyr::filter(dsL, id==1)\n```\n\n## Load Data\n```{r}\ndplyr::filter(dsL, id==1) %>% select(id, year, attend, attendF, sexF, raceF)\n```\n\n## Today's objective \n```{r dsM01, results=\"hide\", echo=F}\n```\n\n```{r loadTheme, results=\"hide\", echo=F}\n```\n\n```{r graph25, echo=F, warning=F, message=F, out.width=\"90%\"}\n```\n\n\n\n## Minimalistic start\n<div class=\"columns-2\">\n```{r}\ndplyr::filter(dsL, id==1) %>% \n  dplyr::select(id, year, attend, attendF)\n```\n\n</br> </br>\nHow often did you **attend** a worhsip service during the last year?\n```{r, echo=F}\nattendLevels<- c(1:8)\nattendLabels<-c( \"Never\",\n                 \"Once or Twice\",\n                 \"Less than once/month\",\n                 \"About once/month\",\n                 \"About twice/month\",\n                 \"About once/week\",\n                 \"Several times/week\",\n                 \"Everyday\")\nattendMetrics <- data.frame(attendLevels, attendLabels)\ndplyr::arrange(attendMetrics,-attendLevels)\n```\n</div>\nQ: How do we map these data to abstract dimensions? \n\n\n## Preparing the canvas {.smaller}\n<div class=\"columns-2\">\n```{r dsM01, out.width=\"50%\"}\n```\n\n```{r, out.width=\"95%\", eval=FALSE}\np <- ggplot2::ggplot(dsM,aes(x=year,y=attend))\np\n```\n</br> </br> </br> </br> </br> </br> </br> </br> </br> </br>\n```\n# Error: No layers in plot\n```\n</div>\n<div class=\"notes\">\nThe data that you want to visualise and a set of aesthetic mappings\ndescribing how variables in the data are mapped to aesthetic attributes\nthat you can perceive. [Elegant Graphics for Data Analysis](http://http://ggplot2.org/book/)\n</div>\nNext: add a geom  \nNote: Data mapping\n\n\n## First strokes: points {.smaller}\n<div class=\"columns-2\">\n```{r dsM01}\n```\n\n```{r graph01, out.width=\"95%\", warning=F}\n```\n</div>\n<div class=\"notes\">\nGeometric objects, **geoms** for short, represent what you actually see on\nthe plot: points, lines, polygons, etc. [Elegant Graphics for Data Analysis](http://http://ggplot2.org/book/)\n</div>\nNote: Geom  \nNext: try a different geom \n\n\n## First strokes: lines {.smaller}\n<div class=\"columns-2\">\n```{r dsM01}\n```\n\n```{r graph02, out.width=\"95%\", warning=F}\n```\n</div>\n<div class=\"notes\">\nSee SAPE [ggplot2 Quick Reference](http://sape.inf.usi.ch/quick-reference/ggplot2/geom) for a graphical guide to most geoms. For the ultimate authority, consult the [official documentation](http://docs.ggplot2.org/0.9.2.1/index.html)\n</div>\nNote: list of geoms  \nNext: combine geoms  \n\n\n## First strokes {.smaller}\n<div class=\"columns-2\">\n```{r dsM01}\n```\n\n```{r graph03, out.width=\"95%\", warning=F}\n```\n</div>\nNext: mapping inside geoms  \n\n\n## Flexible mapping  {.smaller}\n<div class=\"columns-2\">\n```{r dsM01}\n```\n\n```{r graph04, out.width=\"95%\", warning=F}\n```\n</div>\n<div class=\"notes\">\nSee SAPE [ggplot2 Quick Reference](http://sape.inf.usi.ch/quick-reference/ggplot2/geom) for a graphical guide to most geoms. For the ultimate authority, consult the [official documentation](http://docs.ggplot2.org/0.9.2.1/index.html)\n</div>\nNext: custom graphical themes    \n  \n\n## Flexibility of styling {.smaller}\n```{r loadTheme, out.width=\"95%\", warning=F}\n```\n<div class=\"notes\">\nFor more options see [theme vignettes](http://docs.ggplot2.org/dev/vignettes/themes.html)\n</div>\n</br> \nNext: apply theme  \n\n\n## Theme vs No Theme {.smaller}\n<div class=\"columns-2\">\n```{r graph05, out.width=\"95%\", warning=F}\n```\nNote: more theme options  \nNext: scales, setting axis range  \n</br> </br> </br> </br> </br> </br> </br>\n```{r graph04a, out.width=\"95%\", warning=F}\n```\n<div class=\"notes\">\nFor more options see [theme vignettes](http://docs.ggplot2.org/dev/vignettes/themes.html)\n</div>\n\n\n## Customizing scales: X : limits {.smaller}\n<div class=\"columns-2\">\n```{r graph06, out.width=\"95%\", warning=F}\n```\n\n```{r graph05a, out.width=\"95%\", warning=F}\n```\n</div>\n<div class=\"notes\">\nThe **scales** map values in the data space to values in an aesthetic space,\nwhether it be colour, or size, or shape. [Elegant Graphics for Data Analysis](http://http://ggplot2.org/book/)\n</div>\nNote: Scales  \nNext: set axis breaks \n\n\n## Customizing scales: X : breaks {.smaller}\n<div class=\"columns-2\">\n```{r graph07, out.width=\"95%\", warning=F}\n```\n\n```{r graph06a, out.width=\"95%\", warning=F}\n```\nNext: breaks customization \n\n\n\n## Customizing scales: X : breaks : manual {.smaller}\n<div class=\"columns-2\">\n```{r graph08, out.width=\"95%\", warning=F}\n```\n\n```{r graph06a, out.width=\"95%\", warning=F}\n```\nNext: customizing y-axis \n\n\n## Customizing scales: Y {.smaller}\n<div class=\"columns-2\">\n```{r graph07, out.width=\"95%\", warning=F}\n```\n</div>\nNext: with y-axis customized\n\n\n## Customizing scales: Y {.smaller}\n<div class=\"columns-2\">\n```{r graph09, out.width=\"95%\", warning=F}\n```\n</div>\nNext: axes titles  \n\n\n## Customizing scales: Y {.smaller}\n<div class=\"columns-2\">\n```{r graph09a, out.width=\"95%\", warning=F}\n```\n</div>\nNext: axes titles \n\n\n## Axes titles {.smaller}\n<div class=\"columns-2\">\n```{r graph10, out.width=\"95%\", warning=F}\n```\n</div>\nNext: adding main title\n\n\n## Main title {.smaller}\n<div class=\"columns-2\">\n```{r graph11, out.width=\"95%\", warning=F}\n\n```\n</div>\n<div class=\"notes\">\nThere are many ways to add elements in ggplot. Below is another example.  See this handy [cheatsheet](http://zevross.com/blog/2014/08/04/beautiful-plotting-in-r-a-ggplot2-cheatsheet-3/) for more options.\n```{r graph11a, out.width=\"70%\"}\n```\n</div>\nNext: learning the lingo  \nNote: alternatives, [cheatsheet](http://zevross.com/blog/2014/08/04/beautiful-plotting-in-r-a-ggplot2-cheatsheet-3/)\n\n\n\n## The anatomy of a ggplot\n![sape](http://sape.inf.usi.ch/sites/default/files/imagecache/width600/ggplot2-anatomy-all-annotated.png)\n\nThe names of ggplot elements are visually explained in another great [ggplot quick reference](http://sape.inf.usi.ch/quick-reference/ggplot2) by SAPE research group.\n\nNext: adding units\n\n\n## Minimalistic + 1 {.smaller}\n<div class=\"columns-2\">\n```{r graph12, out.width=\"95%\", warning=F}\n\n```\n\n\n</br>\nNext: grouping cases \n</div>\n\n\n\n## Map groupings : individuals {.smaller}\n<div class=\"columns-2\">\n```{r graph13, out.width=\"95%\", warning=F}\n\n```\n\n\n</br>\nNext: adding more cases \n</div>\n\n\n\n## Facing the Overplotting Issue  {.smaller}\n<div class=\"columns-2\">\n```{r graph14, out.width=\"95%\", warning=F}\n```\n\n</br>\nNext: jittering lines  \nNote: press \"p\" for zoom  \n</div>\n<div class=\"notes\">\n```{r graph14, out.width=\"100%\", echo=F, warning=F, message=F}\n```\n</div>\n\n\n\n## Jittering lines {.smaller}\n<div class=\"columns-2\">\n```{r graph15, out.width=\"95%\", warning=F}\n```\n\n</br>\nNext: jittering  points  \nNote: press \"p\" for zoom    \n</div>\n</br> </br> </br> </br>\n<div class=\"notes\">\n```{r graph15, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\n\n\n\n## Jittering points {.smaller}\n<div class=\"columns-2\">\n```{r graph16, out.width=\"95%\", warning=F}\n```\n\n</br>\nNext: coloring lines  \nNote: press \"p\" for zoom    \n</div>\n</br> </br> </br> </br>\n<div class=\"notes\">\n```{r graph16, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\n\n\n## Coloring lines {.smaller}\n<div class=\"columns-2\">\n```{r graph17, out.width=\"95%\", warning=F}\n```\n\n</br>\nNext: coloring points  \nNote: press \"p\" for zoom    \n</div>\n</br> </br> \n<div class=\"notes\">\n```{r graph17, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\nTo use human names for colors, refer to the [R color palette]([colors in R](http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf). For explore computer palette [colrd.org](http://http://colrd.com/) and [colorbrewer2](http://http://www.colorbrewer2.net/)\n\n\n\n## Coloring points {.smaller}\n<div class=\"columns-2\">\n```{r graph18, out.width=\"95%\", warning=F}\n```\n\n</br>\nNext: alpha  \nNote: press \"p\" for zoom    \n</div>\n</br> \n<div class=\"notes\">\n```{r graph18, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\nFor shape and linetypes consult [R cookbook](http://www.cookbook-r.com/Graphs/Shapes_and_line_types/) or [SAPE Quick Reference](http://sape.inf.usi.ch/quick-reference/ggplot2/shape)\n\n\n## Transparancy / Alpha channel {.smaller}\n<div class=\"columns-2\">\n```{r graph19, out.width=\"95%\", warning=F}\n```\n\n</br>\nNext: tuning  1  \nNote: press \"p\" for zoom    \n</div>\n</br> \n<div class=\"notes\">\n```{r graph19, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\n\n\n## Fainter, larger dots {.smaller}\n<div class=\"columns-2\">\n```{r graph20, out.width=\"95%\", warning=F}\n```\n\n</br>\nNext: tuning  2  \nNote: press \"p\" for zoom    \n</div>\n</br> \n<div class=\"notes\">\n```{r graph20, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\n\n\n\n## Crisper, smaller dots {.smaller}\n<div class=\"columns-2\">\n```{r graph21, out.width=\"95%\", warning=F}\n```\n\n</br>\nNext: faceting 1  \nNote: press \"p\" for zoom    \n</div>\n</br> \n<div class=\"notes\">\n```{r graph21, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\n\n\n## Faceting {.smaller}\n<div class=\"columns-2\">\n```{r graph22, out.width=\"95%\", warning=F}\n```\n\n</br> </br> </br>\nNext: removing factor level  \nNote: press \"p\" for zoom    \n</div>\n<div class=\"notes\">\n```{r graph22, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\n\n\n## Exclude levels {.smaller}\n<div class=\"columns-2\">\n```{r graph23, out.width=\"95%\", warning=F}\n```\n\n</br> </br> </br>\nNext: tranforming variable    \nNote: press \"p\" for zoom    \n</div>\n</br> \n<div class=\"notes\">\n```{r graph23, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\n\n\n\n## Centering time {.smaller}\n<div class=\"columns-2\">\n```{r graph24, out.width=\"95%\", warning=F}\n```\n\n</br> </br> </br> \nNext: final styling  \nNote: press \"p\" for zoom  \n</div>\n<div class=\"notes\">\n```{r graph24, out.width=\"100%\", echo=F,warning=F,message=F}\n```\n</div>\n\n\n\n## Final touches {.smaller}\n<div class=\"columns-2\">\n```{r graph25, out.width=\"95%\", warning=F}\n```\n\n.\n</br> </br> </br> </br>\nNext: final graph  \n</div>\n\n\n \n----\n```{r graph25, echo=F, warning=F, message=F, out.width=\"100%\"}\n```\n\n\n## Next time\n\n- Oct 14  -- Intro to Reproducible Research  \n- Oct 21  -- RR Basic Skills (1): Data Manipulation\n- Oct 28  -- Intro to Latent Class and Latent Transition Models  \n- Nov  4  -- RR Basic Skills (2): Graph Production  \n- Nov 11      \n- Nov 18  -- **RR Basic Skills (3): Statistical Modeling**   \n- Nov 25  -- RR Basic Skills (4): Dynamic Reporting   \n- Dec 2 -- Migrating into R from other Statistical Software  \n\n[NLSWeb]:https://www.nlsinfo.org/investigator/pages/login.jsp\n[NLS]:http://www.bls.gov/nls/\n\n\n## Question? Comments?\n\nYou can forward questions to Ann Greenwood (ann.greenwood@popdata.bc.ca)  or Vincenza Gruppuso (vincenza@uvic.ca) during the live Q&A. They are standing by to take your questions.   \n \n\n\n\n",
    "created" : 1415922461445.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1928443497",
    "id" : "226E3E6A",
    "lastKnownWriteTime" : 1415926398,
    "path" : "~/GitHub/COAG-colloquium-2014F/Reports/2014-11-04-Producing-Graphs.Rmd",
    "project_path" : "Reports/2014-11-04-Producing-Graphs.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}