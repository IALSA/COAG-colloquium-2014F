---
title: "Model sequence report"
output:
  html_document:
    css: ~/GitHub/COAG-Colloquium-2014F/Reports/LCMsequence/libs/sidebar.css
    fig.retina: 2
    fig_width: 8
    toc: yes
    keep_md: false
  md_document:
    toc: yes
    toc_depth: 3
  pdf_document:
    fig_crop: no
    fig_width: 8
    highlight: haddock
    latex_engine: xelatex
    number_sections: yes
    toc: yes
    toc_depth: 3
mainfont: Calibri
---

<!--  Set the working directory to the repository's base directory; this assumes the report is nested inside of only one directory.-->
```{r, echo=F, message=F} 
require(knitr)
opts_knit$set(root.dir='../../')  #Don't combine this call with any other chunk -especially one that uses file paths.

```

```{r set_options, echo=F, message=F}
require(knitr)
# getwd()
opts_chunk$set(
  results='show', 
  message = TRUE,
  comment = NA, 
  tidy = FALSE,
  fig.height = 12, 
  fig.width = 14, 
#   out.width = NULL,
  fig.path = 'sequence/',     
  warning = FALSE,
#   ,dev = "png"
   dpi = 70
)
echoChunks <- FALSE
warningChunks<- FALSE
messageChunks<- FALSE
evalChunks <- TRUE
figHightChunk <- 9
figHightChunkSequence <- 11.5 
options(width=120) #So the output is 50% wider than the default.
read_chunk("./Reports/LCMsequence/sequence.R") # the file to which knitr calls for the chunks
```

```{r LoadPackages, echo=echoChunks, message=F}
```

```{r LoadSources, echo=echoChunks, message=F}
```

```{r DeclareGlobals, echo=echoChunks, message=FALSE}
```

```{r LoadData, echo=echoChunks, message=T}
# select only respondence in the cross-sectional sample
```

# Overview  
There are total of 29 distinct models, which can be organized into 4 groups:  

+  with fixed effects only  (F):  9 models
+  with      1 random term  (R1): 9 models
+  with      2 random terms (R2): 7 models
+  with      3 random temrs (R3): 4 models

The following layout helps understand how each of the model group was constructed. The columns count the number of terms  on the first level, while the rows indicate what predictors are added to the second level. Replace the stars in the name of the model with **F** for models with only the fixed effects  and **R1**, **R2**, and **R3**  for models with the corresponding number of random terms in the second level. 
<img src = 'models/formulas/grid_map.png' width="50%"></img> </br>

For example, all models in group F are as follows.    

<img src = 'models/formulas/grid_F.png' width="100%"></img>  </br>

For maps of R1, R2, and R3 model groups see the bottom of the report.  

# General form
The general form of the models can be expressed with LCM notation of Bollen & Curran (2006) or MLM notation of Snijders & Boskers (2011) 

<img src = 'models/formulas/spec_wide.png' width="100%"></img> 
<img src = 'models/formulas/Notation.png' width="70%"></img> 


# F-group : fixed effects
## m0_F 
```{r m0_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m1_F 
```{r m1_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2_F 
```{r m2_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m0a_F 
```{r m0a_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence}  
```

## m1a_F 
```{r m1a_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2a_F 
```{r m2a_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m1b_F 
```{r m1b_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2b_F 
```{r m2b_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2c_F 
```{r m2c_F, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```




# R1-group : 1 random effect
## m0_R1 
```{r m0_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```


## m1_R1 
```{r m1_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2_R1 
```{r m2_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m0a_R1 
```{r m0a_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m1a_R1 
```{r m1a_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2a_R1 
```{r m2a_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m1b_R1 
```{r m1b_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2b_R1 
```{r m2b_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2c_R1 
```{r m2c_R1, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```




# R2-group : 2 random effects
## m1_R2 
```{r m1_R2, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2_R2 
```{r m2_R2, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m1a_R2 
```{r m1a_R2, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2a_R2 
```{r m2a_R2, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m1b_R2 
```{r m1b_R2, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2b_R2 
```{r m2b_R2, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2c_R2 
```{r m2c_R2, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```



# R3-group : 3 random effects
## m2_R3 
```{r m2_R3, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```


## m2a_R3 
```{r m2a_R3, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2b_R3 
```{r m2b_R3, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

## m2c_R3 
```{r m2c_R3, echo=echoChunks, warning=warningChunks, message=messageChunks, eval=evalChunks, fig.height= figHightChunkSequence} 
```

</br>  </br>


# Fit Information
```{r loadRDS, echo=echoChunks}
```

```{r allModels, echo=echoChunks, results="hide", warning=warningChunks, message=messageChunks}
```


# Models w/ fixed only
<img src = 'models/formulas/grid_F.png'  width="100%"></img> 

## F by row
```{r F_row, echo=echoChunks, results="hide", warning=warningChunks, message=messageChunks, fig.height= figHightChunkSequence} 
```

## F by column
```{r F_col, echo=echoChunks, results="hide" , warning=warningChunks, message=messageChunks,, fig.height= figHightChunkSequence} 
```

# Models with 1 random term
<img src = 'models/formulas/grid_R1.png'  width="90%"></img> 

## R1 by row
```{r R1_row, echo=echoChunks, results="hide" , warning=warningChunks, message=messageChunks,, fig.height= figHightChunkSequence} 
```

## R1 by column
```{r R1_col, echo=echoChunks, results="hide" , warning=warningChunks, message=messageChunks,, fig.height= figHightChunkSequence} 
```

# Models with 2 random terms
<img src = 'models/formulas/grid_R2.png'  width="80%"></img> 

## R2 by row
```{r R2_row, echo=echoChunks, results="hide" , warning=warningChunks, message=messageChunks, fig.height= 10}
```

## R2 by column
```{r R2_col, echo=echoChunks, results="hide" , warning=warningChunks, message=messageChunks, fig.height= 10}
```

# Models with 3 random terms
<img src = 'models/formulas/grid_R3.png' width="100%"></img> 

## R3 by row
```{r R3_row, echo=echoChunks, results="hide" , warning=warningChunks, message=messageChunks, fig.height= 10}
```

## R3 by column
```{r R3_col, echo=echoChunks, results="hide" , warning=warningChunks, message=messageChunks, fig.height= 10}
```


</br> </br> </br> </br> </br> </br> 
